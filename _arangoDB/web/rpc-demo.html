<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>JSON-RPC Demo for JQuery Terminal Emulator</title>
    <meta name="author" content="Jakub Jankiewicz - jcubic&#64;onet.pl"/>
    <meta name="Description" content="Demonstration for JQuery Terminal Emulator using call automaticly JSON-RPC service (in php) with authentication."/>
    <script src="js/jquery-1.7.1.min.js"></script>
    <script src="js/jquery.mousewheel-min.js"></script>
    <script src="js/jquery.terminal-0.4.15.js"></script>
    <link href="css/jquery.terminal.css" rel="stylesheet"/>
    <script>
jQuery(document).ready(function($) {
	jQuery(function($, undefined) {
	    $('body').terminal(function(command, term) {
	        if (command !== '') {
	            var result = command;
	            if (result != undefined) {
	                // term.echo(String(result));
				    if (!conn) {
				        return false;
				    }
				    if (!String(result)) {
				        return false;
				    }
				    conn.send(String(result));
					term.pause()
				    conn.onmessage = function(evt) {
					  // $('body').terminal.append('<div style="width: 100%; ">ws&gt;assshit</div>');
					  term.echo(evt.data)
				   }
				    conn.onclose = function(evt) {
				        terminal.echo("Connection closed.")
				    }
				   term.resume()
				    return false
	            }
	        }
	    }, {
	        greetings: 'Javascript Interpreter',
	        name: 'js_demo',
	        height: 200,
	        width: 450,
	        prompt: 'ws>'});
	});
	
});
$(function() {
	var response
if (window["WebSocket"]) {
    conn = new WebSocket("ws://localhost:8180/ws");
    conn.onclose = function(evt) {
        terminal.echo("Connection closed.")
    }

} else {
    terminal.echo("Your browser does not support WebSockets.")
}
});
    </script>
  </head>
<body>
</body>
